---
title: "PS3 506 Yeomans"
author: "Sydney Yeomans"
format:
  html:
    embed-resources: true
editor: visual
---

## Problem 1

For the “nice tables”, use a function such as kable from knitr, or the stargazer package (or find another approach) to generate HTML/LaTeX tables for inclusion. The results should be clearly labeled, rounded appropriately, and easily readable.

a. Merge the two files to create a single data.frame. Keep only records which matched. Print out the dimensions of the merged data.frame.

```{r}
install.packages("haven")
library(haven)
aux_df <- read_xpt("AUX_I.xpt")
demo_df <- read_xpt("DEMO_I.xpt")
#megered_df <-
#dim(merged_df)
```


b. Clean up each - ensure all missing values are actually NA (rather than 999 or something), and if it’s categorical, convert it to factor with informative levels. Variables: Gender, Citizenship status, Number of children 5 years or younger in the household, and Annual household income - There’s also an issue with the ordering of the categories here; take a look, identify the issue, and implement a solution.

```{r}

```


c. The Tympanometric width measure is looks approximately like a Poisson distribution. Fit four Poisson regression models predicting a respondent’s Tympanometric width in each ear. Each model is defined below, for a specific ear and a specific set of covariates.

```{r}

```



d.

```{r}

```



## Problem 2

Use the “sakila” database discussed in class. For each of the following questions, solve them in two ways: First, use SQL query or queries to extract the appropriate table(s), then use regular R operations on those data frames to answer the question. Second, use a single SQL query to answer the question. Compare each approach using microbenchmark.

```{r}
#read in data and add the needed libraries:
#install.packages("RSQLite")
library(RSQLite)
#install.packages("DBI")
library(DBI)
sakila <-  dbConnect(RSQLite::SQLite(), "sakila_master.db")

```

SQL version:

a. For each store, how many customers does that store have, and what percentage of customers of that store are active in the system?

```{r}
#dbListTables(sakila)

gg <- function(query) {
  dbGetQuery(sakila, query)
}


```

b. Generate a table identifying the names and country of each staff member.

```{r}

```

c. Identify the name(s) of the film(s) which was/were rented for the highest dollar value. (Assume all costs are in USD regardless of country.) (Hint: You can merge a table more than once.)

```{r}

```


Base R and data frame version:

a.

```{r}

```

b.

```{r}

```

c.

```{r}

```


Single SQL querey:

a.

```{r}

```


b.

```{r}

```


c.

```{r}

```



## Problem 3

Download the ``Australia - 500 Records'' data. Use it to answer the following questions.

```{r}
aus_df <- read.csv("au-500.csv")
```

a. What percentage of the websites are .com’s (as opposed to .net, .com.au, etc)?

```{r}
#grep("\\.com\\.au", aus_df$web)
table(grepl("\\.com\\.au", aus_df$web))
```
Zero percent of the websites in the data set end in .com. All of the websites end in .com.au, which can be seen just taking a look at the data set but this gives us concrete proof that this is the case and our eyes aren't tricking us.

b. What is the most common domain name amongst the email addresses?

```{r}

```


c. What proportion of company names contain a non-alphabetic character, excluding commas and whitespace. (E.g. “Jane Doe, LLC” would not contain an eligible non-alphabetic character; “Plumber 247” would.) What about if you also exclude ampersands (“&”)?

```{r}

```


d. Make all phone numbers written like cell phones. Show it works by printing the first 10 phone numbers of each column.

```{r}

```


e. Produce a histogram of the log of the apartment numbers for all addresses. (You may assume any number at the end of the an address is an apartment number.)

```{r}

```


f. Do you think the apartment numbers would pass as real data? Based on Benford's law

```{r}

```








